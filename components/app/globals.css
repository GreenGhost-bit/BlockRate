/* Additional mobile optimizations for app/globals.css */

@layer utilities {
  /* Mobile-first responsive utilities */
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }

  .mobile-safe-padding {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
  }

  .mobile-container {
    padding-left: 1rem;
    padding-right: 1rem;
  }

  @media (min-width: 640px) {
    .mobile-container {
      padding-left: 1.5rem;
      padding-right: 1.5rem;
    }
  }

  @media (min-width: 1024px) {
    .mobile-container {
      padding-left: 2rem;
      padding-right: 2rem;
    }
  }

  /* Mobile wallet connection optimizations */
  .mobile-wallet-button {
    @apply w-full sm:w-auto;
    font-size: 16px; /* Prevent zoom on iOS */
  }

  .mobile-search-input {
    font-size: 16px; /* Prevent zoom on iOS */
    @apply w-full;
  }

  /* Mobile-friendly modals */
  .mobile-modal {
    @apply fixed inset-0 z-50 bg-black/80;
  }

  .mobile-modal-content {
    @apply absolute bottom-0 left-0 right-0 bg-slate-800 rounded-t-xl max-h-[90vh] overflow-y-auto;
  }

  @media (min-width: 640px) {
    .mobile-modal-content {
      @apply relative inset-auto bg-slate-800 rounded-xl max-w-lg mx-auto mt-20 max-h-[80vh];
    }
  }

  /* Touch-friendly cards */
  .mobile-card {
    @apply p-4 sm:p-6;
    transition: transform 0.2s ease-in-out;
  }

  .mobile-card:active {
    transform: scale(0.98);
  }

  /* Mobile navigation */
  .mobile-nav {
    @apply fixed bottom-0 left-0 right-0 bg-slate-900 border-t border-slate-700 z-40;
    padding-bottom: env(safe-area-inset-bottom);
  }

  .mobile-nav-item {
    @apply flex-1 flex flex-col items-center justify-center py-2 px-1 touch-target;
  }

  /* Responsive text scaling */
  .responsive-text-xs {
    @apply text-xs sm:text-sm;
  }

  .responsive-text-sm {
    @apply text-sm sm:text-base;
  }

  .responsive-text-base {
    @apply text-base sm:text-lg;
  }

  .responsive-text-lg {
    @apply text-lg sm:text-xl;
  }

  .responsive-text-xl {
    @apply text-xl sm:text-2xl;
  }

  .responsive-text-2xl {
    @apply text-2xl sm:text-3xl;
  }

  .responsive-text-3xl {
    @apply text-3xl sm:text-4xl lg:text-5xl;
  }

  /* Mobile-optimized spacing */
  .mobile-spacing-sm {
    @apply space-y-2 sm:space-y-3;
  }

  .mobile-spacing-md {
    @apply space-y-4 sm:space-y-6;
  }

  .mobile-spacing-lg {
    @apply space-y-6 sm:space-y-8;
  }

  /* Mobile grid layouts */
  .mobile-grid-auto {
    @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3;
  }

  .mobile-grid-stats {
    @apply grid grid-cols-2 sm:grid-cols-4;
  }

  /* Mobile-friendly buttons */
  .mobile-button-group {
    @apply flex flex-col space-y-2 sm:flex-row sm:space-y-0 sm:space-x-2;
  }

  .mobile-button-full {
    @apply w-full sm:w-auto;
  }

  /* Swipe gestures */
  .swipe-container {
    touch-action: pan-x;
    overflow-x: auto;
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .swipe-container::-webkit-scrollbar {
    display: none;
  }

  /* Mobile keyboard optimizations */
  .mobile-form-input {
    font-size: 16px; /* Prevent zoom on iOS */
    @apply w-full px-4 py-3 rounded-lg;
  }

  /* Pull-to-refresh indicator */
  .pull-to-refresh {
    @apply flex items-center justify-center py-4 text-gray-400;
    transform: translateY(-100%);
    transition: transform 0.3s ease-in-out;
  }

  .pull-to-refresh.active {
    transform: translateY(0);
  }

  /* Mobile loading states */
  .mobile-skeleton {
    @apply animate-pulse bg-slate-700 rounded;
  }

  .mobile-skeleton-text {
    @apply h-4 bg-slate-700 rounded mb-2;
  }

  .mobile-skeleton-button {
    @apply h-10 bg-slate-700 rounded;
  }

  /* Mobile-optimized tables */
  .mobile-table {
    @apply block sm:table w-full;
  }

  .mobile-table-row {
    @apply block sm:table-row border-b border-slate-700 mb-4 sm:mb-0;
  }

  .mobile-table-cell {
    @apply block sm:table-cell px-2 py-1 sm:px-4 sm:py-2;
  }

  .mobile-table-cell:before {
    content: attr(data-label) ": ";
    @apply font-bold sm:hidden;
  }

  /* Mobile alert styles */
  .mobile-alert {
    @apply fixed top-4 left-4 right-4 z-50 sm:relative sm:top-auto sm:left-auto sm:right-auto;
  }

  /* Haptic feedback simulation */
  .haptic-light {
    animation: haptic-light 0.1s ease-in-out;
  }

  .haptic-medium {
    animation: haptic-medium 0.15s ease-in-out;
  }

  .haptic-heavy {
    animation: haptic-heavy 0.2s ease-in-out;
  }

  @keyframes haptic-light {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(0.98); }
  }

  @keyframes haptic-medium {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(0.96); }
  }

  @keyframes haptic-heavy {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(0.94); }
  }

  /* Mobile chart responsiveness */
  .mobile-chart-container {
    @apply w-full overflow-x-auto;
  }

  .mobile-chart {
    min-width: 300px;
    @apply w-full sm:min-w-0;
  }

  /* Dark mode mobile optimizations */
  @media (prefers-color-scheme: dark) {
    .mobile-card {
      @apply bg-slate-800/90;
    }
    
    .mobile-nav {
      @apply bg-slate-900/95 backdrop-blur-sm;
    }
  }

  /* Landscape orientation adjustments */
  @media (orientation: landscape) and (max-height: 500px) {
    .landscape-compact {
      @apply py-2;
    }
    
    .landscape-hide {
      @apply hidden;
    }
  }

  /* iOS specific optimizations */
  @supports (-webkit-touch-callout: none) {
    .ios-scroll-fix {
      -webkit-overflow-scrolling: touch;
    }
    
    .ios-input-fix {
      font-size: 16px !important;
    }
  }

  /* Android specific optimizations */
  @media (hover: none) and (pointer: coarse) {
    .android-touch-optimization {
      @apply select-none;
      -webkit-tap-highlight-color: transparent;
    }
  }

  /* Accessibility improvements for mobile */
  .mobile-focus-visible:focus-visible {
    @apply outline-2 outline-offset-2 outline-blue-500;
  }

  .mobile-screen-reader {
    @apply sr-only sm:not-sr-only;
  }

  /* PWA status bar styling */
  .pwa-status-bar {
    @apply h-0;
    padding-top: env(safe-area-inset-top);
    background-color: #0f172a;
  }

  /* Mobile-first animations */
  @media (prefers-reduced-motion: no-preference) {
    .mobile-slide-up {
      animation: mobile-slide-up 0.3s ease-out;
    }
    
    .mobile-fade-in {
      animation: mobile-fade-in 0.3s ease-out;
    }
  }

  @keyframes mobile-slide-up {
    from {
      transform: translateY(100%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  @keyframes mobile-fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  /* Mobile wallet connection states */
  .mobile-wallet-connecting {
    @apply relative overflow-hidden;
  }

  .mobile-wallet-connecting::after {
    content: '';
    @apply absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent;
    animation: mobile-shimmer 1.5s infinite;
  }

  @keyframes mobile-shimmer {
    0% {
      transform: translateX(-100%);
    }
    100% {
      transform: translateX(100%);
    }
  }

  /* Mobile transaction progress */
  .mobile-tx-progress {
    @apply relative w-full h-1 bg-slate-700 rounded-full overflow-hidden;
  }

  .mobile-tx-progress-bar {
    @apply h-full bg-gradient-to-r from-green-500 to-blue-500 rounded-full;
    animation: mobile-progress 2s ease-in-out infinite;
  }

  @keyframes mobile-progress {
    0% {
      transform: translateX(-100%);
    }
    50% {
      transform: translateX(0%);
    }
    100% {
      transform: translateX(100%);
    }
  }
}

/* Mobile-specific component overrides */
@media (max-width: 640px) {
  .container {
    @apply px-4;
  }

  /* Mobile navigation adjustments */
  .mobile-nav-compact {
    @apply text-xs;
  }

  /* Mobile form improvements */
  .mobile-form-group {
    @apply space-y-3;
  }

  .mobile-form-row {
    @apply flex-col space-y-3;
  }

  /* Mobile card stacking */
  .mobile-card-stack > * {
    @apply mb-4;
  }

  .mobile-card-stack > *:last-child {
    @apply mb-0;
  }

  /* Mobile button sizing */
  .mobile-button-lg {
    @apply h-12 text-base;
  }

  .mobile-button-icon {
    @apply w-5 h-5;
  }

  /* Mobile typography scaling */
  .mobile-heading-1 {
    @apply text-2xl font-bold;
  }

  .mobile-heading-2 {
    @apply text-xl font-semibold;
  }

  .mobile-heading-3 {
    @apply text-lg font-medium;
  }

  /* Mobile spacing adjustments */
  .mobile-section-spacing {
    @apply py-8;
  }

  .mobile-card-spacing {
    @apply p-4;
  }

  /* Mobile list optimizations */
  .mobile-list-item {
    @apply py-4 border-b border-slate-700;
  }

  .mobile-list-item:last-child {
    @apply border-b-0;
  }
}

/* Tablet-specific optimizations */
@media (min-width: 641px) and (max-width: 1024px) {
  .tablet-grid-2 {
    @apply grid-cols-2;
  }

  .tablet-grid-3 {
    @apply grid-cols-3;
  }

  .tablet-spacing {
    @apply px-6 py-8;
  }
}

/* High DPI display optimizations */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .high-dpi-border {
    border-width: 0.5px;
  }
  
  .high-dpi-text {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}